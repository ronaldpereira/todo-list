'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.handleError = handleError;
exports.error = error;

var _ms = require('ms');

var _ms2 = _interopRequireDefault(_ms);

var _chalk = require('chalk');

var _chalk2 = _interopRequireDefault(_chalk);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Packages
function handleError(err) {
  if (err.status === 403) {
    error('Authentication error. Run `now -L` or `now --login` to log-in again.');
  } else if (err.status === 429) {
    if (err.retryAfter === null) {
      error('Rate limit exceeded error. Please try later.');
    } else {
      error('Rate limit exceeded error. Try again in ' + (0, _ms2.default)(err.retryAfter * 1000, { long: true }) + ', or upgrade your account: https://zeit.co/now#pricing');
    }
  } else if (err.userError) {
    error(err.message);
  } else if (err.status === 500) {
    error('Unexpected server error. Please retry.');
  } else {
    error('Unexpected error. Please try later. (' + err.message + ')');
  }
}

function error(err) {
  console.error('> ' + _chalk2.default.red('Error!') + ' ' + err);
}